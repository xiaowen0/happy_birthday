$(document).ready(function(){$(document.body).hasClass("fullHeight")&&setBodyMinHeight(),getUrlParam("debug")&&(enableDebug(),$('<div id="debugModeTag">调试模式</div>').appendTo(document.body),$(".debugButtonLayer").removeClass("hide").show()),$("textarea.autoIncreaseHeight").each(function(){setTextareaAutoIncreaseHeight(this)}),$(".checkAllChildren").each(function(){setCheckAllChildrenAction(this)}),$("#mainMusicControlButton").on("click",function(){toggleMusic()}),$(".showLayer").on("click",function(){var t=$(this).data("target");t&&$(t).fadeIn()}),initDialogAction(),$(".backspaceButton").on("click",function(){var t=$(this).parents(".inputGroup").find(".inputbox"),e=t.val();e.length<1||(e=e.substr(0,e.length-1),t.val(e))}),$(".autoPageDown").each(function(){setAutoPageDown(this,10)}),1<=$(".takeTurnDisplayImage").length&&$(".takeTurnDisplayImage").each(function(){setTakeTurnDisplayImage(this)}),$(".videoPlayer .playButton").on("click",function(){var t=$(this).parents(".videoPlayer").find(".videoController");if(t.length)try{t[0].play()}catch(t){addConsoleLog(t)}}),$(".videoPlayer .pauseButton").on("click",function(){var t=$(this).parents(".videoPlayer").find(".videoController");if(t.length)try{t[0].pause()}catch(t){addConsoleLog(t)}}),$(".videoPlayer .fullScreenButton").on("click",function(){var t=$(this).parents(".videoPlayer").find(".videoController");t.length&&(t=t[0],setFullScreenVideo(t))}),$(".videoController").on("dblclick",function(){setFullScreenVideo(this)}),$("[data-html-src]").each(function(){var t=$(this).data("html-src");t&&loadHtml(t+".html",this)}),$(".qqMapContainer").length&&$(".qqMapContainer").each(function(){new qq.maps.Map(this,{center:new qq.maps.LatLng(23.027094,113.111318),zoom:15})}),$(".treeView").length&&initTreeView(".treeView"),$("#settingIconContainer .settingButton").length&&$("#settingIconContainer .settingButton").on("click",function(){$("#UISettingDialog").fadeIn(),adjustDialog("#UISettingDialog"),centerDialog("#UISettingDialog")}),$("#UISettingForm").length&&initUISettingForm($("#UISettingForm")[0]);var t=$(".showTagCode");t.length&&t.each(function(){var t=this.dataset.source||"";if(t){var e=$(t);if(e.length<1)addConsoleLog("[warnning] source: "+t+" not found.");else{var n=escapeFormatHtml(e[0].outerHTML);this.innerHTML=n}}else addConsoleLog("[warnning] data-source property not defined.")});var e=function(){$(".page").removeClass("landscape portrait").addClass(getWindowWidth()>getWindowHeight()?"landscape":"portrait"),function(){var t=parseInt($("body").data("base-width"));if(t){var e=getWindowWidth();if(e){var n=e/t*10;$("html").css("font-size",n+"px")}else addConsoleLog("get window width fail.")}}(),$(".response").each(function(){$(this).css("height","auto");var t=this.offsetWidth,e=parseFloat($(this).data("size-ratio")||$(this).data("ratio")||0),n=t*e;getDebugStatus()&&existDebuggingContent("response")&&(addDebugLog("width="+t),addDebugLog("ratio="+e),addDebugLog("height="+n)),$(this).css("height",n+"px")}),$(".dialog:visible").each(function(){adjustDialog(this),centerDialog(this)})};e(),$(window).on("resize",e)});